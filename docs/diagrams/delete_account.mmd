flowchart TD
    Desc["ðŸ—‘ï¸ Slet konto â€” hvad sker der?\nBrugeren bekrÃ¦fter sletning i en dialog. Derefter slettes\nbÃ¥de kontoen i Supabase OG alle lokale data pÃ¥ telefonen\n(security key, tokens). Brugeren logges ud og sendes til login."]
    style Desc fill:#e8f4fd,stroke:#b8d4e8

    Start["Bruger trykker\nSlet konto"] --> Confirm["Vis bekrÃ¦ftelsesdialog:\n'Er du sikker? Kan ikke fortrydes'"]
    Confirm -->|"Annuller"| EndFlow["Dialog lukkes\nIngen Ã¦ndringer"]
    Confirm -->|"BekrÃ¦ft"| GetEmail["Hent brugerens email\nfra aktuel session"]
    GetEmail --> CallDelete["Kald Supabase:\nSlet brugerens konto permanent\n(auth_delete_user RPC)"]
    CallDelete -->|"Succes"| DeleteLocal["Slet alle lokale data\npÃ¥ denne telefon:\nsecurity key, tokens osv."]
    DeleteLocal --> SignOut["Log bruger ud"]
    SignOut --> NavigateLogin["Send til login-side"]
    CallDelete -->|"Fejl"| ShowError["Vis fejlbesked\ntil brugeren"]
